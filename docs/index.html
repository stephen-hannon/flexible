<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Flexible â€“ A Flex Point Analyzer</title>

	<link href="./favicon.ico" rel="shortcut icon" type="image/x-icon">
	<link href="https://fonts.googleapis.com/css?family=PT+Sans|PT+Serif:700" rel="stylesheet">
	<link href="style.css" rel="stylesheet">
</head>

<body>
	<header role="banner">
		<h1>
			<svg class="logo" viewBox="0 0 114.62 16" height="32">
				<mask id="line-mask">
					<rect x="0" y="0" width="13" height="16" fill="white" />
					<path d="M0,2.5 h3.5 v1 h4 v2 h3 v1 h2 v3.5" fill="none" stroke="black" stroke-width="2" />
				</mask>

				<g fill="#fff" stroke="none">
					<path d="M0,0 h13 v3 h-9 v3 h9 v3 h-9 v7 h-4 v-16" mask="url(#line-mask)" />
					<path d="M28,13.07V16H15.76V0h4V13.07Z"/>
					<path d="M42,13.07V16H30.24V0H41.88V2.93H34.23V6.29h7.29V9.22H34.23v3.85Z"/>
					<path d="M61.56,0,55.31,7.71,62.25,16H57.08l-4.34-5.28L48.48,16H43.39l6.79-8.29L43.77,0h5.17l3.81,4.72L56.5,0Z"/>
					<path d="M68.28,0V16h-4V0Z"/>
					<path class="cls-4" d="M72,0h6.92a5.87,5.87,0,0,1,3.89,1.19A3.58,3.58,0,0,1,84.18,4,3.46,3.46,0,0,1,82,7.2a4.59,4.59,0,0,1,2.52,1.53,4,4,0,0,1,.88,2.57A4.39,4.39,0,0,1,84,14.69,6.08,6.08,0,0,1,79.75,16H72Zm4,2.93V6.36H78a2.11,2.11,0,0,0,1.5-.5,1.59,1.59,0,0,0,.54-1.23,1.57,1.57,0,0,0-.54-1.22A2.15,2.15,0,0,0,78,2.93Zm0,6.36v3.78h2.24a4.54,4.54,0,0,0,2.3-.44,1.69,1.69,0,0,0,.69-1.53,1.54,1.54,0,0,0-.66-1.32,2.91,2.91,0,0,0-1.78-.49Z"/>
					<path d="M100.54,13.07V16H88.34V0h4V13.07Z"/>
					<path d="M114.62,13.07V16h-11.8V0h11.64V2.93H106.8V6.29h7.3V9.22h-7.3v3.85Z"/>
				</g>
				<path d="M0,2.5 h3.5 v1 h4 v2 h3 v1 h2 v3.5" fill="none" stroke="#fff" />
			</svg>
		</h1>
	</header>

	<div id="flexible" class="content-container">
		<section id="instructions">
			<h2>Analyze your Flex Point usage &amp; start spending smarter.</h2>
			<p>This is a tool to help  you keep track of how quickly you're spending your Flex Points. Follow these quick instructions to see your own personalized results.</p>
			<ol>
				<li>Click the link to log in to <a href="https://get.cbord.com/irish1card/full/login.php" target="_blank" title="Irish1Card GET (opens in a new tab)">Irish1Card&nbsp;GET</a> with your Notre Dame credentials.</li>
				<li>Click "View All Transaction History" under the "My Recent Transactions" header.</li>
				<li>Making sure "ALL in the past 6 Months" is selected in the Month/Year dropdown, copy the entire table and paste it into the text box below. (Don't worry, everything stays in your browser.)</li>
			</ol>

			<div class="form-field">
				<label for="start-balance">Enter your starting Flex Point balance:</label>
				$<input type="number" id="start-balance" name="start-balance" v-model.lazy.number="startBalance" />
			</div>

			<div class="row">
				<div class="col">
					<label for="raw-data">Paste your table data</label>
					<textarea id="raw-data" autocomplete="off" cols="50" rows="2" v-model.lazy="rawData"></textarea>
					<div class="form-error" v-if="rawDataError">
						<p>Error parsing data. Make sure there are lines of the form:</p>
						<pre>Flex Points	{{ $options.dayjs().format('MMMM D, YYYY, h:mmA') }}	C-Store 1	- $5.08</pre>
					</div>
				</div>

				<div class="col">
					<label for="quick-balance">Enter your current balance</label>
					$<input type="number" class="hide-steppers" id="quick-balance" min="0" :max="startBalance" step="0.01" :placeholder="remainingBalanceIdeal.toFixed(2)" v-model.lazy.number="quickBalance" @change="useQuickBalance" />
				</div>

				<div class="col">
					<p>Just looking?</p>
					<button @click="useDemo">View demo</button>
				</div>
			</div>

			<footer role="contentinfo">
				<p>
					Made with <code>&lt;3</code> by <a href="https://github.com/stephen-hannon" target="_blank">Stephen Hannon</a>.
					See the code on <a href="https://github.com/stephen-hannon/flexible" target="_blank">GitHub</a>.
					Have a bug report, suggestion, or comment? <a href="https://goo.gl/forms/Sw20wbBGAIeyeTt02" target="_blank">Leave feedback.</a>
				</p>
				<p style="font-size: .8em;">This app is not affiliated with the University of Notre Dame or CBORD.</p>
			</footer>
		</section>

		<section id="results">
			<h2 id="results-header">
				<template v-if="processedView">Balance: {{ formatCurrency(remainingBalance) }} on {{ formatDate(now) }}
					({{ formatCurrency(Math.abs(remainingBalanceRelative)) }} {{ remainingBalanceRelative &lt; 0 ? 'behind' : 'ahead' }})</template>
				<template v-else>Ideal balance: {{ formatCurrency(remainingBalanceIdeal) }}</template>
			</h2>

			<div class="stats-container">
				<div class="stats-box">
					<h3>Before now</h3>
					<ul class="stats-list">
						<li><span class="stat">{{ formatCurrencyOutput(rates.past && rates.past.total) }}</span> in total</li>
						<li><span class="stat">{{ formatCurrencyOutput(rates.past && rates.past.perDay) }}</span> per day</li>
						<li><span class="stat">{{ formatCurrencyOutput(rates.past && rates.past.perWeek) }}</span> per week</li>
					</ul>
				</div>

				<div class="stats-box">
					<h3>After now</h3>
					<ul class="stats-list">
						<li><span class="stat">{{ formatCurrencyOutput(rates.future && rates.future.total) }}</span> in total</li>
						<li><span class="stat">{{ formatCurrencyOutput(rates.future && rates.future.perDay) }}</span> per day</li>
						<li><span class="stat">{{ formatCurrencyOutput(rates.future && rates.future.perWeek) }}</span> per week</li>
					</ul>
				</div>
			</div>

			<div id="chart"></div>
		</section>
	</div>
	
	<script src="../node_modules/vue/dist/vue.js"></script>
	<script src="../node_modules/highcharts/highcharts.js"></script> <!-- https://code.highcharts.com/highcharts.js -->
	<script src="../node_modules/dayjs/dayjs.min.js"></script>

	<script src="../src/sample-data.js"></script>
	<script src="../src/index.js"></script>
</body>
</html>
