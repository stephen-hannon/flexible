!function(t){function e(e){for(var n,s,o=e[0],l=e[1],c=e[2],h=0,d=[];h<o.length;h++)s=o[h],r[s]&&d.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(u&&u(e);d.length;)d.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={0:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;i.push([13,1]),a()}([,,,,function(t){t.exports=[[15159096e5,500],[151604094e4,485.03],[151619772e4,480.44],[15162243e5,474.2],[151639554e4,468.12],[151642512e4,464.33],[151650444e4,460.54],[151666266e4,458.95],[151674168e4,453.46],[151691394e4,446.57],[15169344e5,441.19],[15172746e5,438.41],[15175191e5,433.32],[151760094e4,430.37],[151803732e4,427.98],[151812336e4,422.04],[151814436e4,414.1],[151819824e4,409.45],[151824138e4,404.26],[151847562e4,397.67],[151847652e4,389.23],[151865238e4,381.55],[151884372e4,377.76],[151896954e4,375.37],[151906098e4,370.88],[151915956e4,365.39],[151933308e4,360.05],[151953336e4,354.96],[151974282e4,352.57],[151976424e4,346.57],[151993794e4,342.84],[152001204e4,334.2],[152037144e4,329.81],[152052282e4,321.73],[152143212e4,310.2],[152157456e4,304.21],[15216711e5,299.67],[15217491e5,293.99],[152175096e4,289.7],[152217936e4,286.5],[152228778e4,268.52],[152287854e4,264.58],[152295852e4,261.38],[15230322e5,254.84],[152313744e4,250.99],[1523229e6,248.6],[152330382e4,242.61],[152338692e4,239.96],[152338776e4,234.87],[152356296e4,231.67],[152363676e4,223.83],[152374938e4,215.95],[152375166e4,212.5],[1523928e6,204.11],[152399394e4,197.62],[152401806e4,190.64],[152418744e4,179.39],[152425044e4,176.44],[152427216e4,170.95],[152434518e4,163.16],[152443428e4,159.96],[152452056e4,154.99],[152459874e4,148.5],[152460078e4,147.21],[152476806e4,140.22],[152477904e4,134.73],[152477994e4,131.75],[152495688e4,116.77],[152495856e4,111.78],[15252072e5,104.7],[152521086e4,98.46],[152523516e4,96.47],[152536092e4,88.59],[152545494e4,86.4],[152553318e4,75.63],[15255348e5,73.48],[1525545e6,63.49],[15256182e5,53.74],[15256503e5,46.75],[152583006e4,45],[152587608e4,40.01],[152596662e4,21.02],[152600454e4,15.53],[152606142e4,.33],[15263703e5,0]]},,function(t,e,a){},function(t,e,a){},function(t,e,a){},,,,,function(t,e,a){a(20),t.exports=a(19)},,,function(t,e,a){"use strict";var n=a(6);a.n(n).a},function(t,e,a){"use strict";var n=a(7);a.n(n).a},function(t,e,a){"use strict";var n=a(8);a.n(n).a},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var n=a(3),r=a(11),i=a.n(r),s=a(9),o=a(12),l=a(0),c=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card",class:{"card-wide":this.wide}},[e("div",{staticClass:"card-content"},[this._t("default")],2)])};c._withStripped=!0;var u={props:{wide:Boolean}},h=(a(16),a(1)),d=Object(h.a)(u,c,[],!1,null,"54cdc180",null);d.options.__file="src/components/Card.vue";var f=d.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collapsible-container",class:{"collapsible-collapsed":t.collapsed}},[a("button",{staticClass:"collapsible-header",attrs:{title:"Click to "+(t.collapsed?"expand":"collapse")+" section"},on:{click:function(e){return t.$emit("toggle",!t.collapsed)}}},[t._v("\n\t\t"+t._s(t.header)+"\n\t\t"),t._m(0)]),t._v(" "),a("transition",{attrs:{name:"slide"}},[t.collapsed?t._e():a("div",{staticClass:"collapsible-content"},[t._t("default")],2)])],1)};p._withStripped=!0;var m={model:{prop:"collapsed",event:"toggle"},props:{collapsed:Boolean,header:String}},v=(a(17),Object(h.a)(m,p,[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"collapsible-header-icon"},[e("i",{staticClass:"fas fa-chevron-up"})])}],!1,null,"02f7cdec",null));v.options.__file="src/components/Collapsible.vue";var w=v.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[t._v("\n\t$ "),a("input",t._b({directives:[{name:"model",rawName:"v-model.lazy.number",value:t._value,expression:"_value",modifiers:{lazy:!0,number:!0}}],staticClass:"appearance-textfield hide-steppers",attrs:{type:"number",required:""},domProps:{value:t._value},on:{change:function(e){t._value=t._n(e.target.value)},blur:function(e){return t.$forceUpdate()}}},"input",t.$attrs,!1))])};g._withStripped=!0;var b={inheritAttrs:!1,model:{prop:"value",event:"submit"},props:{value:{validator:function(t){return!isNaN(parseFloat(t))}}},data:function(){return{_value:null}},watch:{value:{immediate:!0,handler:function(t){this._value=t}}},methods:{onSubmit:function(t){var e=t.target;this.$emit("submit",this._value),this._value=null,e&&e[0]&&e[0].blur&&e[0].blur()}}},y=Object(h.a)(b,g,[],!1,null,null,null);y.options.__file="src/components/Input.vue";var D=y.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-message",class:t.type&&"form-"+t.type},[a("button",{staticClass:"float-right icon-button",attrs:{title:"Close message"},on:{click:function(e){return t.$emit("close")}}},[a("i",{staticClass:"fas fa-times",attrs:{title:"Close message"}})]),t._v(" "),t._t("default")],2)};B._withStripped=!0;var C={props:{type:String}},_=(a(18),Object(h.a)(C,B,[],!1,null,"61d2d687",null));_.options.__file="src/components/Message.vue";var x=_.exports,S=a(2),k=a.n(S),I=function(t){return"".concat(t<0?"−":"","$").concat(Math.abs(t).toFixed(2))};function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=[],n=!0,r=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(a.push(s.value),!e||a.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var O=function(t,e){return Math.round(100*t+100*e)/100},A=function(t,e){return e?t.map(function(t){var a=M(t,2),n=a[0],r=a[1];return[n,O(r,e)]}):t},j=function(t,e){return k()("Spring"===e?new Date(t,0,15):new Date(t,7,25)).day(0)},N=function(t,e){return k()("Spring"===e?new Date(t,4,7):new Date(t,11,15)).day(6)},E=function(t){var e,a=k()(t),n=a.get("year"),r=N(n,"Fall"),i=N(n,"Spring");return r.add(12096e5,"ms").isBefore(a)?(n++,e="Spring"):e=i.add(12096e5,"ms").isBefore(a)?"Fall":"Spring",{year:n+("Spring"===e?.1:.2),name:"".concat(e," ").concat(n),start:j(n,e).valueOf(),end:N(n,e).valueOf()}},T=function(t,e){var a=t/864e5;return{total:e,perDay:t>0?e/a||0:null,perWeek:t>0?e/(a/7)||0:null}},$=function(t,e,a,n,r){var i=(t-e)/(a-e);return Math.max(0,Math.min(i,1))*(r-n)+n},P=function(t,e,a,n){return t!==e?function(t,e){var a=[],n=k()(t),r=n.startOf("day").add(1,"day");for(n.isSame(r)||(a.push(t),n=r);n.isBefore(e);)a.push(n.valueOf()),n=n.add(1,"day");return a.push(e),a}(t,e).map(function(r){return[r,$(r,t,e,a,n)]}):[[t,a],[e,n]]};function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=[],n=!0,r=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(a.push(s.value),!e||a.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var R=function(t){var e=V(t.split("\t"),4),a=e[0],n=e[1],r=e[2],i=e[3];if(void 0===i||"Flex Points"!==a)return null;var s=n.replace(/\s/g," ").replace(/\B[AP]M/," $&"),o=Date.parse(s),l=i.match(/[\d.]+/);if(isNaN(o)||!l)return null;var c=i.match(/[-\u2013]/),u=+l[0];return c&&c.index<l.index&&(u=-u),{date:o,amountChange:u,details:r}},F=a(4);function q(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=[],n=!0,r=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(a.push(s.value),!e||a.length!==e);n=!0);}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}s.b.add(o.a,l.a,l.b,l.i,l.j,l.c,l.k,l.h,l.g,l.d,l.e,l.f),s.a.watch(),n.a.config.productionTip=!1,n.a.component("app-card",f),n.a.component("app-collapsible",w),n.a.component("app-input",D),n.a.component("app-message",x),new n.a({el:"#flexible",filters:{currency:I,currencySafe:function(t){return"number"!=typeof t||isNaN(t)?"$—":I(t)},date:function(t){return k()(t).format("ddd, MMMM D, YYYY")}},data:{chartData:null,collapseInstructions:!1,currentIdealBalanceIndex:null,debugNow:null,loaderShow:!0,manualDates:{start:null,end:null},now:Date.now(),platformGuess:"windows",processedView:null,rawData:"",rawDataComplete:!0,rawDataError:!1,remainingBalance:null,showMessages:{rawDataComplete:!1},startBalance:500,tabOption:null,tabOptions:{macos:"macOS",mobile:"Mobile",windows:"Windows"}},computed:{ctrlOrCmd:function(){return"macos"===this.tabOption?"⌘ Cmd":"Ctrl"},inSemester:function(){return this.now>this.semester.start-12096e5},inSemesterCurrent:function(){return this.getNow()>this.semesterCurrent.start-12096e5},quickData:function(){return P(Math.min(this.semester.start,this.now),this.now,this.startBalance,this.remainingBalance)},rates:function(){return{past:T(this.semester&&Math.min(this.now,this.semester.end)-this.semester.start,this.spentBalance),future:T(this.semester&&this.semester.end-Math.max(this.now,this.semester.start),this.remainingBalanceSafe)}},remainingBalanceIdeal:function(){return this.getIdealBalanceAtDate(this.now)},remainingBalanceIdealCurrent:function(){return this.getIdealBalanceAtDate(this.getNow(),this.semesterCurrent)},remainingBalanceRelative:function(){return this.remainingBalanceSafe-this.remainingBalanceIdeal},remainingBalanceSafe:function(){return null==this.remainingBalance?this.remainingBalanceIdeal:this.remainingBalance},semester:function(){return this.findSemesterAdjusted(this.now)},semesterCurrent:function(){var t=E(this.getNow());return t.year===this.semester.year?this.semester:t},spentBalance:function(){return O(this.startBalance,-this.remainingBalanceSafe)}},watch:{now:function(){this.manualDates={start:null,end:null}},rawData:function(t){t&&(-1===t.indexOf("Flex Points")?this.rawDataError=!0:this.parseRawData(t),this.rawData=null)},startBalance:function(){this.makeChart()}},mounted:function(){Math.max(document.documentElement.clientWidth,window.innerWidth||0)<640&&(this.collapseInstructions=!0);var t=window.navigator.userAgent;/iPhone|iPad|iPod|Android/.test(t)?this.platformGuess="mobile":-1!==t.indexOf("Mac")&&(this.platformGuess="macos"),this.tabOption=this.platformGuess;var e=window.location.hash.match(/^#now=(\d{4}-\d{2}-\d{2})(T\d{2}:\d{2}:\d{2})?$/);if(null!==e){var a=W(e,3),n=a[1],r=a[2],i=new Date("".concat(n).concat(r||"T00:00:00"));this.debugNow=i.getTime(),this.now=this.debugNow,console.log("Setting debug date to",i)}this.loaderShow=!1,this.makeChart()},methods:{adjustIncompleteData:function(t){t=Number(t),"parse"!==this.processedView||this.rawDataComplete||isNaN(t)||(this.showMessages.rawDataComplete=!1,this.remainingBalance=t,this.chartData=A(this.chartData,t-this.chartData[this.chartData.length-1][1]),this.makeChart())},changeSemesterDate:function(t,e,a){var n=864e5*e;if("start"===t){if(this.semester.start+n<this.semester.end){if(a)return!0;this.manualDates.start+=n}}else if("end"===t&&this.semester.end+n>this.semester.start){if(a)return!0;this.manualDates.end+=n}if(a)return!1;this.makeChart()},findSemesterAdjusted:function(t){var e=E(t);return this.manualDates.start&&(e.start+=this.manualDates.start),this.manualDates.end&&(e.end+=this.manualDates.end),e},getIdealBalanceAtDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.semester;return $(t,e.start,e.end,this.startBalance,0)},getNow:function(){return this.debugNow||Date.now()},makeChart:function(){var t="quick"===this.processedView?this.quickData:this.chartData,e="parse"!==this.processedView||this.rawDataComplete?[]:P(this.semester.start,t[0][0],this.startBalance,t[0][1]),a=P(this.now,Math.max(this.semester.end,this.now),this.remainingBalance,0),n=t?[].concat(q(e),q(t),q(a)).map(function(t){var e=W(t,1)[0];return[e,this.getIdealBalanceAtDate(e)]},this):P(this.semester.start,this.semester.end,this.startBalance,0),r=n.findIndex(function(t){return t[0]>=this.now},this);-1===r&&(r=n.length);var s=6e4*Math.floor(this.now/6e4);n.splice(r,0,{x:s,y:this.remainingBalanceIdeal,marker:{enabled:!0}});var o=[{name:"Ideal balance",colorIndex:1,data:n,id:"ideal"}];return t&&o.push({name:"Estimated balance",colorIndex:0,className:"line-dash",data:e,id:"estimated",linkedTo:"actual"},{name:"Actual balance",colorIndex:0,step:"quick"!==this.processedView?"left":null,data:t,id:"actual"},{name:"Projected balance",colorIndex:0,className:"line-dash",data:a,id:"projected",linkedTo:":previous"}),i.a.chart("chart",{chart:{type:"line",styledMode:!0,spacingLeft:0,spacingRight:0,events:{load:"demo"!==this.processedView?function(){var t=this.get("ideal").data[r],e=this.get("actual")&&this.get("actual").data[r];this.tooltip.refresh(e?[t,e]:[t])}:void 0}},plotOptions:{line:{marker:{enabled:!1}}},series:o,time:{useUTC:!1},title:{text:246.01===this.remainingBalance?"My name is Jean Valjean":void 0},tooltip:{split:!0,valueDecimals:2,valuePrefix:"$",xDateFormat:"%a, %B %e, %Y, %l:%M %p"},xAxis:{crosshair:{snap:!1},labels:{format:"{value:%b %e}"},type:"datetime"},yAxis:{crosshair:{snap:!1},max:this.startBalance,title:{text:"Flex Points"},labels:{format:"${value}"}}})},parseRawData:function(t){this.now=this.getNow();var e=function(t,e){for(var a,n=t.split("\n"),r=[],i=!1,s=!1,o=0,l=0;l<n.length&&!i;l++){var c=R(n[l]);if(null!==c){var u=c.date,h=c.amountChange,d=c.details;"GUI Location"===d&&0===r.length&&(s=!0);var f=r[0]?O(r[0][1],-o):0;o=h,r.unshift([u,f]),h===e?i=!0:"PatronImport Location"===d&&h>=110&&(i=!0,a=h)}}return{parsedRawData:r,rawDataComplete:i,rawDataCompleteEnd:s,newStartBalance:a}}(t,this.startBalance),a=e.parsedRawData,n=e.rawDataComplete,r=e.rawDataCompleteEnd,i=e.newStartBalance;if(this.chartData=a,this.rawDataComplete=n,0!==this.chartData.length){var s;this.scrollToResults(),this.rawDataError=!1,void 0!==i&&(this.startBalance=i),r||(this.rawDataComplete?this.chartData=A(this.chartData,this.startBalance-this.chartData[0][1]):this.showMessages.rawDataComplete=!0);var o=W(this.chartData[this.chartData.length-1],2);s=o[0],this.remainingBalance=o[1],E(s).year!==this.semester.year?this.now=s:this.chartData.push([this.now,this.remainingBalance]),this.processedView="parse",this.makeChart()}else this.rawDataError=!0},scrollToResults:function(){this.$nextTick(function(){document.getElementById("results").scrollIntoView()})},useDemo:function(){this.scrollToResults(),this.rawDataComplete=!0,this.chartData=F,this.startBalance=F[0][1];var t=W(F[F.length-1],2);this.now=t[0],this.remainingBalance=t[1],this.processedView="demo",this.makeChart()},useQuick:function(t){this.scrollToResults(),this.now=this.getNow(),this.rawDataComplete=!0,this.remainingBalance=t,this.processedView="quick",this.makeChart()}}}),"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("./service-worker.js").catch(function(t){console.log("Unable to register service worker:",t)})})}]);
//# sourceMappingURL=main.js.map